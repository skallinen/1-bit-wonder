shadow$provide.module$node_modules$bitcoinjs_lib$src$payments$p2pk=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.p2pk=void 0;const networks_1=require("module$node_modules$bitcoinjs_lib$src$networks"),bscript=require("module$node_modules$bitcoinjs_lib$src$script"),types_1=require("module$node_modules$bitcoinjs_lib$src$types"),lazy=require("module$node_modules$bitcoinjs_lib$src$payments$lazy"),OPS=bscript.OPS;exports.p2pk=function(a,opts){if(!(a.input||
a.output||a.pubkey||a.input||a.signature))throw new TypeError("Not enough data");opts=Object.assign({validate:!0},opts||{});(0,types_1.typeforce)({network:types_1.typeforce.maybe(types_1.typeforce.Object),output:types_1.typeforce.maybe(types_1.typeforce.Buffer),pubkey:types_1.typeforce.maybe(types_1.isPoint),signature:types_1.typeforce.maybe(bscript.isCanonicalScriptSignature),input:types_1.typeforce.maybe(types_1.typeforce.Buffer)},a);const _chunks=lazy.value(()=>bscript.decompile(a.input)),o={name:"p2pk",
network:a.network||networks_1.bitcoin};lazy.prop(o,"output",()=>{if(a.pubkey)return bscript.compile([a.pubkey,OPS.OP_CHECKSIG])});lazy.prop(o,"pubkey",()=>{if(a.output)return a.output.slice(1,-1)});lazy.prop(o,"signature",()=>{if(a.input)return _chunks()[0]});lazy.prop(o,"input",()=>{if(a.signature)return bscript.compile([a.signature])});lazy.prop(o,"witness",()=>{if(o.input)return[]});if(opts.validate){if(a.output){if(a.output[a.output.length-1]!==OPS.OP_CHECKSIG)throw new TypeError("Output is invalid");
if(!(0,types_1.isPoint)(o.pubkey))throw new TypeError("Output pubkey is invalid");if(a.pubkey&&!a.pubkey.equals(o.pubkey))throw new TypeError("Pubkey mismatch");}if(a.signature&&a.input&&!a.input.equals(o.input))throw new TypeError("Signature mismatch");if(a.input){if(1!==_chunks().length)throw new TypeError("Input is invalid");if(!bscript.isCanonicalScriptSignature(o.signature))throw new TypeError("Input has invalid signature");}}return Object.assign(o,a)}}
//# sourceMappingURL=module$node_modules$bitcoinjs_lib$src$payments$p2pk.js.map
