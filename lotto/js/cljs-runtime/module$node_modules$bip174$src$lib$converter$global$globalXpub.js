shadow$provide.module$node_modules$bip174$src$lib$converter$global$globalXpub=function(global,require,module,exports){var Buffer=require("module$node_modules$buffer$index").Buffer;"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const typeFields_1=require("module$node_modules$bip174$src$lib$typeFields");exports.decode=function(keyVal){if(keyVal.key[0]!==typeFields_1.GlobalTypes.GLOBAL_XPUB)throw Error("Decode Error: could not decode globalXpub with key 0x"+keyVal.key.toString("hex"));
if(79!==keyVal.key.length||![2,3].includes(keyVal.key[46]))throw Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+keyVal.key.toString("hex"));if(0!==keyVal.value.length/4%1)throw Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");var extendedPubkey=keyVal.key.slice(1);extendedPubkey={masterFingerprint:keyVal.value.slice(0,4),extendedPubkey,path:"m"};for(const i of[...Array(keyVal.value.length/4-1).keys()]){const val=keyVal.value.readUInt32LE(4*i+4),
isHard=!!(val&2147483648);extendedPubkey.path+="/"+(val&2147483647).toString(10)+(isHard?"'":"")}return extendedPubkey};exports.encode=function(data){var head=Buffer.from([typeFields_1.GlobalTypes.GLOBAL_XPUB]);head=Buffer.concat([head,data.extendedPubkey]);const splitPath=data.path.split("/"),value=Buffer.allocUnsafe(4*splitPath.length);data.masterFingerprint.copy(value,0);let offset=4;splitPath.slice(1).forEach(level=>{const isHard="'"===level.slice(-1);level=2147483647&parseInt(isHard?level.slice(0,
-1):level,10);isHard&&(level+=2147483648);value.writeUInt32LE(level,offset);offset+=4});return{key:head,value}};exports.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }";exports.check=function(data){const epk=data.extendedPubkey,mfp=data.masterFingerprint;data=data.path;return Buffer.isBuffer(epk)&&78===epk.length&&-1<[2,3].indexOf(epk[45])&&Buffer.isBuffer(mfp)&&4===mfp.length&&"string"===typeof data&&!!data.match(/^m(\/\d+'?)*$/)};exports.canAddToArray=function(array,
item,dupeSet){const dupeString=item.extendedPubkey.toString("hex");if(dupeSet.has(dupeString))return!1;dupeSet.add(dupeString);return 0===array.filter(v=>v.extendedPubkey.equals(item.extendedPubkey)).length}}
//# sourceMappingURL=module$node_modules$bip174$src$lib$converter$global$globalXpub.js.map
