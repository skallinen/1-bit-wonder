{
"version":3,
"file":"module$node_modules$bip174$src$lib$converter$input$partialSig.js",
"lineCount":4,
"mappings":"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",
"sources":["node_modules/bip174/src/lib/converter/input/partialSig.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$bip174$src$lib$converter$input$partialSig\"] = function(global,require,module,exports) {\nvar Buffer = require('buffer').Buffer;\n'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.PARTIAL_SIG) {\n    throw new Error(\n      'Decode Error: could not decode partialSig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (\n    !(keyVal.key.length === 34 || keyVal.key.length === 66) ||\n    ![2, 3, 4].includes(keyVal.key[1])\n  ) {\n    throw new Error(\n      'Decode Error: partialSig has invalid pubkey in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const pubkey = keyVal.key.slice(1);\n  return {\n    pubkey,\n    signature: keyVal.value,\n  };\n}\nexports.decode = decode;\nfunction encode(pSig) {\n  const head = Buffer.from([typeFields_1.InputTypes.PARTIAL_SIG]);\n  return {\n    key: Buffer.concat([head, pSig.pubkey]),\n    value: pSig.signature,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ pubkey: Buffer; signature: Buffer; }';\nfunction check(data) {\n  return (\n    Buffer.isBuffer(data.pubkey) &&\n    Buffer.isBuffer(data.signature) &&\n    [33, 65].includes(data.pubkey.length) &&\n    [2, 3, 4].includes(data.pubkey[0]) &&\n    isDerSigWithSighash(data.signature)\n  );\n}\nexports.check = check;\nfunction isDerSigWithSighash(buf) {\n  if (!Buffer.isBuffer(buf) || buf.length < 9) return false;\n  if (buf[0] !== 0x30) return false;\n  if (buf.length !== buf[1] + 3) return false;\n  if (buf[2] !== 0x02) return false;\n  const rLen = buf[3];\n  if (rLen > 33 || rLen < 1) return false;\n  if (buf[3 + rLen + 1] !== 0x02) return false;\n  const sLen = buf[3 + rLen + 2];\n  if (sLen > 33 || sLen < 1) return false;\n  if (buf.length !== 3 + rLen + 2 + sLen + 2) return false;\n  return true;\n}\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString = item.pubkey.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return array.filter(v => v.pubkey.equals(item.pubkey)).length === 0;\n}\nexports.canAddToArray = canAddToArray;\n\n};"],
"names":["shadow$provide","global","require","module","exports","Buffer","Object","defineProperty","value","typeFields_1","decode","keyVal","key","InputTypes","PARTIAL_SIG","Error","toString","length","includes","pubkey","slice","signature","encode","pSig","head","from","concat","expected","check","data","isBuffer","buf","rLen","sLen","canAddToArray","array","item","dupeSet","dupeString","has","add","filter","v","equals"]
}
