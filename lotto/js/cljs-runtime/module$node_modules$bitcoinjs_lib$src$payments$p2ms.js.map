{
"version":3,
"file":"module$node_modules$bitcoinjs_lib$src$payments$p2ms.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/bitcoinjs-lib/src/payments/p2ms.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$bitcoinjs_lib$src$payments$p2ms\"] = function(global,require,module,exports) {\n'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.p2ms = void 0;\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst types_1 = require('../types');\nconst lazy = require('./lazy');\nconst OPS = bscript.OPS;\nconst OP_INT_BASE = OPS.OP_RESERVED; // OP_1 - 1\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// input: OP_0 [signatures ...]\n// output: m [pubKeys ...] n OP_CHECKMULTISIG\nfunction p2ms(a, opts) {\n  if (\n    !a.input &&\n    !a.output &&\n    !(a.pubkeys && a.m !== undefined) &&\n    !a.signatures\n  )\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  function isAcceptableSignature(x) {\n    return (\n      bscript.isCanonicalScriptSignature(x) ||\n      (opts.allowIncomplete && x === OPS.OP_0) !== undefined\n    );\n  }\n  (0, types_1.typeforce)(\n    {\n      network: types_1.typeforce.maybe(types_1.typeforce.Object),\n      m: types_1.typeforce.maybe(types_1.typeforce.Number),\n      n: types_1.typeforce.maybe(types_1.typeforce.Number),\n      output: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n      pubkeys: types_1.typeforce.maybe(\n        types_1.typeforce.arrayOf(types_1.isPoint),\n      ),\n      signatures: types_1.typeforce.maybe(\n        types_1.typeforce.arrayOf(isAcceptableSignature),\n      ),\n      input: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n    },\n    a,\n  );\n  const network = a.network || networks_1.bitcoin;\n  const o = { network };\n  let chunks = [];\n  let decoded = false;\n  function decode(output) {\n    if (decoded) return;\n    decoded = true;\n    chunks = bscript.decompile(output);\n    o.m = chunks[0] - OP_INT_BASE;\n    o.n = chunks[chunks.length - 2] - OP_INT_BASE;\n    o.pubkeys = chunks.slice(1, -2);\n  }\n  lazy.prop(o, 'output', () => {\n    if (!a.m) return;\n    if (!o.n) return;\n    if (!a.pubkeys) return;\n    return bscript.compile(\n      [].concat(\n        OP_INT_BASE + a.m,\n        a.pubkeys,\n        OP_INT_BASE + o.n,\n        OPS.OP_CHECKMULTISIG,\n      ),\n    );\n  });\n  lazy.prop(o, 'm', () => {\n    if (!o.output) return;\n    decode(o.output);\n    return o.m;\n  });\n  lazy.prop(o, 'n', () => {\n    if (!o.pubkeys) return;\n    return o.pubkeys.length;\n  });\n  lazy.prop(o, 'pubkeys', () => {\n    if (!a.output) return;\n    decode(a.output);\n    return o.pubkeys;\n  });\n  lazy.prop(o, 'signatures', () => {\n    if (!a.input) return;\n    return bscript.decompile(a.input).slice(1);\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.signatures) return;\n    return bscript.compile([OPS.OP_0].concat(a.signatures));\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  lazy.prop(o, 'name', () => {\n    if (!o.m || !o.n) return;\n    return `p2ms(${o.m} of ${o.n})`;\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      decode(a.output);\n      if (!types_1.typeforce.Number(chunks[0]))\n        throw new TypeError('Output is invalid');\n      if (!types_1.typeforce.Number(chunks[chunks.length - 2]))\n        throw new TypeError('Output is invalid');\n      if (chunks[chunks.length - 1] !== OPS.OP_CHECKMULTISIG)\n        throw new TypeError('Output is invalid');\n      if (o.m <= 0 || o.n > 16 || o.m > o.n || o.n !== chunks.length - 3)\n        throw new TypeError('Output is invalid');\n      if (!o.pubkeys.every(x => (0, types_1.isPoint)(x)))\n        throw new TypeError('Output is invalid');\n      if (a.m !== undefined && a.m !== o.m) throw new TypeError('m mismatch');\n      if (a.n !== undefined && a.n !== o.n) throw new TypeError('n mismatch');\n      if (a.pubkeys && !stacksEqual(a.pubkeys, o.pubkeys))\n        throw new TypeError('Pubkeys mismatch');\n    }\n    if (a.pubkeys) {\n      if (a.n !== undefined && a.n !== a.pubkeys.length)\n        throw new TypeError('Pubkey count mismatch');\n      o.n = a.pubkeys.length;\n      if (o.n < o.m) throw new TypeError('Pubkey count cannot be less than m');\n    }\n    if (a.signatures) {\n      if (a.signatures.length < o.m)\n        throw new TypeError('Not enough signatures provided');\n      if (a.signatures.length > o.m)\n        throw new TypeError('Too many signatures provided');\n    }\n    if (a.input) {\n      if (a.input[0] !== OPS.OP_0) throw new TypeError('Input is invalid');\n      if (\n        o.signatures.length === 0 ||\n        !o.signatures.every(isAcceptableSignature)\n      )\n        throw new TypeError('Input has invalid signature(s)');\n      if (a.signatures && !stacksEqual(a.signatures, o.signatures))\n        throw new TypeError('Signature mismatch');\n      if (a.m !== undefined && a.m !== a.signatures.length)\n        throw new TypeError('Signature count mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2ms = p2ms;\n\n};"],
"names":["shadow$provide","global","require","module","exports","stacksEqual","a","b","length","every","x","i","equals","Object","defineProperty","value","p2ms","networks_1","bscript","types_1","lazy","OPS","OP_INT_BASE","OP_RESERVED","opts","isAcceptableSignature","isCanonicalScriptSignature","undefined","allowIncomplete","OP_0","decode","output","decoded","chunks","decompile","o","m","n","pubkeys","slice","input","signatures","TypeError","assign","validate","typeforce","network","maybe","Number","Buffer","arrayOf","isPoint","bitcoin","prop","compile","concat","OP_CHECKMULTISIG"]
}
