{
"version":3,
"file":"module$node_modules$bip174$src$lib$utils.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/bip174/src/lib/utils.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$bip174$src$lib$utils\"] = function(global,require,module,exports) {\nvar Buffer = require('buffer').Buffer;\n'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst converter = require('./converter');\nfunction checkForInput(inputs, inputIndex) {\n  const input = inputs[inputIndex];\n  if (input === undefined) throw new Error(`No input #${inputIndex}`);\n  return input;\n}\nexports.checkForInput = checkForInput;\nfunction checkForOutput(outputs, outputIndex) {\n  const output = outputs[outputIndex];\n  if (output === undefined) throw new Error(`No output #${outputIndex}`);\n  return output;\n}\nexports.checkForOutput = checkForOutput;\nfunction checkHasKey(checkKeyVal, keyVals, enumLength) {\n  if (checkKeyVal.key[0] < enumLength) {\n    throw new Error(\n      `Use the method for your specific key instead of addUnknownKeyVal*`,\n    );\n  }\n  if (\n    keyVals &&\n    keyVals.filter(kv => kv.key.equals(checkKeyVal.key)).length !== 0\n  ) {\n    throw new Error(`Duplicate Key: ${checkKeyVal.key.toString('hex')}`);\n  }\n}\nexports.checkHasKey = checkHasKey;\nfunction getEnumLength(myenum) {\n  let count = 0;\n  Object.keys(myenum).forEach(val => {\n    if (Number(isNaN(Number(val)))) {\n      count++;\n    }\n  });\n  return count;\n}\nexports.getEnumLength = getEnumLength;\nfunction inputCheckUncleanFinalized(inputIndex, input) {\n  let result = false;\n  if (input.nonWitnessUtxo || input.witnessUtxo) {\n    const needScriptSig = !!input.redeemScript;\n    const needWitnessScript = !!input.witnessScript;\n    const scriptSigOK = !needScriptSig || !!input.finalScriptSig;\n    const witnessScriptOK = !needWitnessScript || !!input.finalScriptWitness;\n    const hasOneFinal = !!input.finalScriptSig || !!input.finalScriptWitness;\n    result = scriptSigOK && witnessScriptOK && hasOneFinal;\n  }\n  if (result === false) {\n    throw new Error(\n      `Input #${inputIndex} has too much or too little data to clean`,\n    );\n  }\n}\nexports.inputCheckUncleanFinalized = inputCheckUncleanFinalized;\nfunction throwForUpdateMaker(typeName, name, expected, data) {\n  throw new Error(\n    `Data for ${typeName} key ${name} is incorrect: Expected ` +\n      `${expected} and got ${JSON.stringify(data)}`,\n  );\n}\nfunction updateMaker(typeName) {\n  return (updateData, mainData) => {\n    for (const name of Object.keys(updateData)) {\n      // @ts-ignore\n      const data = updateData[name];\n      // @ts-ignore\n      const { canAdd, canAddToArray, check, expected } =\n        // @ts-ignore\n        converter[typeName + 's'][name] || {};\n      const isArray = !!canAddToArray;\n      // If unknown data. ignore and do not add\n      if (check) {\n        if (isArray) {\n          if (\n            !Array.isArray(data) ||\n            // @ts-ignore\n            (mainData[name] && !Array.isArray(mainData[name]))\n          ) {\n            throw new Error(`Key type ${name} must be an array`);\n          }\n          if (!data.every(check)) {\n            throwForUpdateMaker(typeName, name, expected, data);\n          }\n          // @ts-ignore\n          const arr = mainData[name] || [];\n          const dupeCheckSet = new Set();\n          if (!data.every(v => canAddToArray(arr, v, dupeCheckSet))) {\n            throw new Error('Can not add duplicate data to array');\n          }\n          // @ts-ignore\n          mainData[name] = arr.concat(data);\n        } else {\n          if (!check(data)) {\n            throwForUpdateMaker(typeName, name, expected, data);\n          }\n          if (!canAdd(mainData, data)) {\n            throw new Error(`Can not add duplicate data to ${typeName}`);\n          }\n          // @ts-ignore\n          mainData[name] = data;\n        }\n      }\n    }\n  };\n}\nexports.updateGlobal = updateMaker('global');\nexports.updateInput = updateMaker('input');\nexports.updateOutput = updateMaker('output');\nfunction addInputAttributes(inputs, data) {\n  const index = inputs.length - 1;\n  const input = checkForInput(inputs, index);\n  exports.updateInput(data, input);\n}\nexports.addInputAttributes = addInputAttributes;\nfunction addOutputAttributes(outputs, data) {\n  const index = outputs.length - 1;\n  const output = checkForOutput(outputs, index);\n  exports.updateOutput(data, output);\n}\nexports.addOutputAttributes = addOutputAttributes;\nfunction defaultVersionSetter(version, txBuf) {\n  if (!Buffer.isBuffer(txBuf) || txBuf.length < 4) {\n    throw new Error('Set Version: Invalid Transaction');\n  }\n  txBuf.writeUInt32LE(version, 0);\n  return txBuf;\n}\nexports.defaultVersionSetter = defaultVersionSetter;\nfunction defaultLocktimeSetter(locktime, txBuf) {\n  if (!Buffer.isBuffer(txBuf) || txBuf.length < 4) {\n    throw new Error('Set Locktime: Invalid Transaction');\n  }\n  txBuf.writeUInt32LE(locktime, txBuf.length - 4);\n  return txBuf;\n}\nexports.defaultLocktimeSetter = defaultLocktimeSetter;\n\n};"],
"names":["shadow$provide","global","require","module","exports","checkForInput","inputs","inputIndex","input","undefined","Error","checkForOutput","outputs","outputIndex","output","throwForUpdateMaker","typeName","name","expected","data","JSON","stringify","updateMaker","updateData","mainData","Object","keys","canAdd","canAddToArray","check","converter","isArray","Array","every","arr","dupeCheckSet","Set","v","concat","Buffer","defineProperty","value","checkHasKey","checkKeyVal","keyVals","enumLength","key","filter","kv","equals","length","toString","getEnumLength","myenum","count","forEach","val","Number","isNaN","inputCheckUncleanFinalized","result","nonWitnessUtxo","witnessUtxo","witnessScriptOK","witnessScript","finalScriptWitness","hasOneFinal","finalScriptSig","redeemScript","updateGlobal","updateInput","updateOutput","addInputAttributes","addOutputAttributes","defaultVersionSetter","version","txBuf","isBuffer","writeUInt32LE","defaultLocktimeSetter","locktime"]
}
