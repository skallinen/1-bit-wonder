shadow$provide.module$node_modules$readable_stream$lib$_stream_writable=function(global,require,module,exports){function CorkedRequest(state){var _this=this;this.entry=this.next=null;this.finish=function(){var entry=_this.entry;for(_this.entry=null;entry;){var cb=entry.callback;state.pendingcb--;cb(void 0);entry=entry.next}state.corkedRequestsFree.next=_this}}function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||require("module$node_modules$readable_stream$lib$_stream_duplex");
options=options||{};"boolean"!==typeof isDuplex&&(isDuplex=stream instanceof Duplex);this.objectMode=!!options.objectMode;isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);this.highWaterMark=getHighWaterMark(this,options,"writableHighWaterMark",isDuplex);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==options.decodeStrings;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=
0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if("function"!==typeof cb)throw new ERR_MULTIPLE_CALLBACK;state.writing=!1;state.writecb=null;state.length-=state.writelen;state.writelen=0;er?(--state.pendingcb,sync?(process.nextTick(cb,er),process.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er)):(cb(er),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er),
finishMaybe(stream,state))):((er=needFinish(state)||stream.destroyed)||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?process.nextTick(afterWrite,stream,state,er,cb):afterWrite(stream,state,er,cb))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==options.emitClose;this.autoDestroy=!!options.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=
new CorkedRequest(this)}function Writable(options){Duplex=Duplex||require("module$node_modules$readable_stream$lib$_stream_duplex");var isDuplex=this instanceof Duplex;if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex);this.writable=!0;options&&("function"===typeof options.write&&(this._write=options.write),"function"===typeof options.writev&&(this._writev=options.writev),"function"===typeof options.destroy&&
(this._destroy=options.destroy),"function"===typeof options.final&&(this._final=options.final));Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=!0;state.sync=!0;if(state.destroyed)state.onwrite(new ERR_STREAM_DESTROYED("write"));else writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite);state.sync=!1}function afterWrite(stream,state,finished,cb){!finished&&0===state.length&&state.needDrain&&
(state.needDrain=!1,stream.emit("drain"));state.pendingcb--;cb();finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var buffer=Array(state.bufferedRequestCount),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers;doWrite(stream,state,!0,state.length,buffer,
"",holder.finish);state.pendingcb++;state.lastBufferedRequest=null;holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state);state.bufferedRequestCount=0}else{for(;entry&&(buffer=entry.chunk,doWrite(stream,state,!1,state.objectMode?1:buffer.length,buffer,entry.encoding,entry.callback),entry=entry.next,state.bufferedRequestCount--,!state.writing););null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry;state.bufferProcessing=
!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;err&&errorOrDestroy(stream,err);state.prefinished=!0;stream.emit("prefinish");finishMaybe(stream,state)})}function finishMaybe(stream,state){var need=needFinish(state);need&&(state.prefinished||state.finalCalled||("function"!==typeof stream._final||state.destroyed?(state.prefinished=!0,stream.emit("prefinish")):
(state.pendingcb++,state.finalCalled=!0,process.nextTick(callFinal,stream,state))),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"),state.autoDestroy&&(state=stream._readableState,(!state||state.autoDestroy&&state.endEmitted)&&stream.destroy())));return need}var process=require("module$node_modules$process$browser");"use strict";module.exports=Writable;var Duplex;Writable.WritableState=WritableState;var internalUtil={deprecate:require("module$node_modules$util_deprecate$browser")},Stream=
require("module$node_modules$readable_stream$lib$internal$streams$stream_browser"),Buffer=require("module$node_modules$buffer$index").Buffer,OurUint8Array=global.Uint8Array||function(){};global=require("module$node_modules$readable_stream$lib$internal$streams$destroy");var getHighWaterMark=require("module$node_modules$readable_stream$lib$internal$streams$state").getHighWaterMark;module=require("module$node_modules$readable_stream$errors").codes;var ERR_INVALID_ARG_TYPE=module.ERR_INVALID_ARG_TYPE,
ERR_METHOD_NOT_IMPLEMENTED=module.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=module.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=module.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=module.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=module.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=module.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=module.ERR_UNKNOWN_ENCODING,errorOrDestroy=global.errorOrDestroy;require("module$node_modules$inherits$inherits_browser")(Writable,Stream);WritableState.prototype.getBuffer=
function(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var realHasInstance=Function.prototype[Symbol.hasInstance];
Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){return realHasInstance.call(this,object)?!0:this!==Writable?!1:object&&object._writableState instanceof WritableState}})}else realHasInstance=function(object){return object instanceof this};Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)};Writable.prototype.write=function(chunk,encoding,cb$jscomp$0){var state=this._writableState,ret=!1,JSCompiler_temp;if(JSCompiler_temp=!state.objectMode)JSCompiler_temp=
chunk,JSCompiler_temp=Buffer.isBuffer(JSCompiler_temp)||JSCompiler_temp instanceof OurUint8Array;JSCompiler_temp&&!Buffer.isBuffer(chunk)&&(chunk=Buffer.from(chunk));"function"===typeof encoding&&(cb$jscomp$0=encoding,encoding=null);JSCompiler_temp?encoding="buffer":encoding||(encoding=state.defaultEncoding);"function"!==typeof cb$jscomp$0&&(cb$jscomp$0=nop);if(state.ending)state=cb$jscomp$0,cb$jscomp$0=new ERR_STREAM_WRITE_AFTER_END,errorOrDestroy(this,cb$jscomp$0),process.nextTick(state,cb$jscomp$0);
else{var JSCompiler_temp$jscomp$0;if(!(JSCompiler_temp$jscomp$0=JSCompiler_temp)){JSCompiler_temp$jscomp$0=chunk;var cb=cb$jscomp$0,er;null===JSCompiler_temp$jscomp$0?er=new ERR_STREAM_NULL_VALUES:"string"===typeof JSCompiler_temp$jscomp$0||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],JSCompiler_temp$jscomp$0));er?(errorOrDestroy(this,er),process.nextTick(cb,er),JSCompiler_temp$jscomp$0=!1):JSCompiler_temp$jscomp$0=!0}JSCompiler_temp$jscomp$0&&(state.pendingcb++,ret=
JSCompiler_temp,ret||(er=chunk,state.objectMode||!1===state.decodeStrings||"string"!==typeof er||(er=Buffer.from(er,encoding)),chunk!==er&&(ret=!0,encoding="buffer",chunk=er)),JSCompiler_temp=state.objectMode?1:chunk.length,state.length+=JSCompiler_temp,er=state.length<state.highWaterMark,er||(state.needDrain=!0),state.writing||state.corked?(JSCompiler_temp=state.lastBufferedRequest,state.lastBufferedRequest={chunk,encoding,isBuf:ret,callback:cb$jscomp$0,next:null},JSCompiler_temp?JSCompiler_temp.next=
state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1):doWrite(this,state,!1,JSCompiler_temp,chunk,encoding,cb$jscomp$0),ret=er)}return ret};Writable.prototype.cork=function(){this._writableState.corked++};Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))};Writable.prototype.setDefaultEncoding=function(encoding){"string"===
typeof encoding&&(encoding=encoding.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((encoding+"").toLowerCase())))throw new ERR_UNKNOWN_ENCODING(encoding);this._writableState.defaultEncoding=encoding;return this};Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,
get:function(){return this._writableState.highWaterMark}});Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;"function"===typeof chunk?(cb=chunk,encoding=chunk=null):"function"===typeof encoding&&(cb=encoding,encoding=null);null!==chunk&&void 0!==chunk&&this.write(chunk,encoding);state.corked&&(state.corked=1,this.uncork());if(!state.ending){chunk=
cb;state.ending=!0;finishMaybe(this,state);if(chunk)if(state.finished)process.nextTick(chunk);else this.once("finish",chunk);state.ended=!0;this.writable=!1}return this};Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(value){this._writableState&&(this._writableState.destroyed=
value)}});Writable.prototype.destroy=global.destroy;Writable.prototype._undestroy=global.undestroy;Writable.prototype._destroy=function(err,cb){cb(err)}}
//# sourceMappingURL=module$node_modules$readable_stream$lib$_stream_writable.js.map
