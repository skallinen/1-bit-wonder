{
"version":3,
"file":"module$node_modules$bitcoin_address_generator$node_modules$bitcoinjs_lib$src$payments$p2wsh.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/bitcoin-address-generator/node_modules/bitcoinjs-lib/src/payments/p2wsh.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$bitcoin_address_generator$node_modules$bitcoinjs_lib$src$payments$p2wsh\"] = function(global,require,module,exports) {\nvar Buffer = require('buffer').Buffer;\nconst lazy = require('./lazy')\nconst typef = require('typeforce')\nconst OPS = require('bitcoin-ops')\n\nconst bech32 = require('bech32')\nconst bcrypto = require('../crypto')\nconst bscript = require('../script')\nconst BITCOIN_NETWORK = require('../networks').bitcoin\n\nconst EMPTY_BUFFER = Buffer.alloc(0)\n\nfunction stacksEqual (a, b) {\n  if (a.length !== b.length) return false\n\n  return a.every(function (x, i) {\n    return x.equals(b[i])\n  })\n}\n\n// input: <>\n// witness: [redeemScriptSig ...] {redeemScript}\n// output: OP_0 {sha256(redeemScript)}\nfunction p2wsh (a, opts) {\n  if (\n    !a.address &&\n    !a.hash &&\n    !a.output &&\n    !a.redeem &&\n    !a.witness\n  ) throw new TypeError('Not enough data')\n  opts = Object.assign({ validate: true }, opts || {})\n\n  typef({\n    network: typef.maybe(typef.Object),\n\n    address: typef.maybe(typef.String),\n    hash: typef.maybe(typef.BufferN(32)),\n    output: typef.maybe(typef.BufferN(34)),\n\n    redeem: typef.maybe({\n      input: typef.maybe(typef.Buffer),\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.Buffer),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer))\n    }),\n    input: typef.maybe(typef.BufferN(0)),\n    witness: typef.maybe(typef.arrayOf(typef.Buffer))\n  }, a)\n\n  const _address = lazy.value(function () {\n    const result = bech32.decode(a.address)\n    const version = result.words.shift()\n    const data = bech32.fromWords(result.words)\n    return {\n      version,\n      prefix: result.prefix,\n      data: Buffer.from(data)\n    }\n  })\n  const _rchunks = lazy.value(function () { return bscript.decompile(a.redeem.input) })\n\n  let network = a.network\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || BITCOIN_NETWORK\n  }\n\n  const o = { network }\n\n  lazy.prop(o, 'address', function () {\n    if (!o.hash) return\n    const words = bech32.toWords(o.hash)\n    words.unshift(0x00)\n    return bech32.encode(network.bech32, words)\n  })\n  lazy.prop(o, 'hash', function () {\n    if (a.output) return a.output.slice(2)\n    if (a.address) return _address().data\n    if (o.redeem && o.redeem.output) return bcrypto.sha256(o.redeem.output)\n  })\n  lazy.prop(o, 'output', function () {\n    if (!o.hash) return\n    return bscript.compile([\n      OPS.OP_0,\n      o.hash\n    ])\n  })\n  lazy.prop(o, 'redeem', function () {\n    if (!a.witness) return\n    return {\n      output: a.witness[a.witness.length - 1],\n      input: EMPTY_BUFFER,\n      witness: a.witness.slice(0, -1)\n    }\n  })\n  lazy.prop(o, 'input', function () {\n    if (!o.witness) return\n    return EMPTY_BUFFER\n  })\n  lazy.prop(o, 'witness', function () {\n    // transform redeem input to witness stack?\n    if (\n      a.redeem &&\n      a.redeem.input &&\n      a.redeem.input.length > 0 &&\n      a.redeem.output &&\n      a.redeem.output.length > 0\n    ) {\n      const stack = bscript.toStack(_rchunks())\n\n      // assign, and blank the existing input\n      o.redeem = Object.assign({ witness: stack }, a.redeem)\n      o.redeem.input = EMPTY_BUFFER\n      return [].concat(stack, a.redeem.output)\n    }\n\n    if (!a.redeem) return\n    if (!a.redeem.output) return\n    if (!a.redeem.witness) return\n    return [].concat(a.redeem.witness, a.redeem.output)\n  })\n\n  // extended validation\n  if (opts.validate) {\n    let hash\n    if (a.address) {\n      if (_address().prefix !== network.bech32) throw new TypeError('Invalid prefix or Network mismatch')\n      if (_address().version !== 0x00) throw new TypeError('Invalid address version')\n      if (_address().data.length !== 32) throw new TypeError('Invalid address data')\n      hash = _address().data\n    }\n\n    if (a.hash) {\n      if (hash && !hash.equals(a.hash)) throw new TypeError('Hash mismatch')\n      else hash = a.hash\n    }\n\n    if (a.output) {\n      if (\n        a.output.length !== 34 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x20) throw new TypeError('Output is invalid')\n      const hash2 = a.output.slice(2)\n      if (hash && !hash.equals(hash2)) throw new TypeError('Hash mismatch')\n      else hash = hash2\n    }\n\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network) throw new TypeError('Network mismatch')\n\n      // is there two redeem sources?\n      if (\n        a.redeem.input &&\n        a.redeem.input.length > 0 &&\n        a.redeem.witness &&\n        a.redeem.witness.length > 0\n      ) throw new TypeError('Ambiguous witness source')\n\n      // is the redeem output non-empty?\n      if (a.redeem.output) {\n        if (bscript.decompile(a.redeem.output).length === 0) throw new TypeError('Redeem.output is invalid')\n\n        // match hash against other sources\n        const hash2 = bcrypto.sha256(a.redeem.output)\n        if (hash && !hash.equals(hash2)) throw new TypeError('Hash mismatch')\n        else hash = hash2\n      }\n\n      if (a.redeem.input && !bscript.isPushOnly(_rchunks())) throw new TypeError('Non push-only scriptSig')\n      if (a.witness && a.redeem.witness && !stacksEqual(a.witness, a.redeem.witness)) throw new TypeError('Witness and redeem.witness mismatch')\n    }\n\n    if (a.witness) {\n      if (a.redeem && a.redeem.output && !a.redeem.output.equals(a.witness[a.witness.length - 1])) throw new TypeError('Witness and redeem.output mismatch')\n    }\n  }\n\n  return Object.assign(o, a)\n}\n\nmodule.exports = p2wsh\n\n};"],
"names":["shadow$provide","global","require","module","exports","stacksEqual","a","b","length","every","x","i","equals","Buffer","lazy","typef","OPS","bech32","bcrypto","bscript","BITCOIN_NETWORK","bitcoin","EMPTY_BUFFER","alloc","p2wsh","opts","address","hash","output","redeem","witness","TypeError","Object","assign","validate","network","maybe","String","BufferN","input","arrayOf","_address","value","result","decode","version","words","shift","data","fromWords","prefix","from","_rchunks","decompile","o","prop","toWords","unshift","encode","slice","sha256","compile","OP_0","stack","toStack","concat","hash2","isPushOnly"]
}
