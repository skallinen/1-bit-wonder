{
"version":3,
"file":"module$node_modules$bitcoinjs_lib$src$payments$p2sh.js",
"lineCount":10,
"mappings":"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",
"sources":["node_modules/bitcoinjs-lib/src/payments/p2sh.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$bitcoinjs_lib$src$payments$p2sh\"] = function(global,require,module,exports) {\nvar Buffer = require('buffer').Buffer;\n'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.p2sh = void 0;\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst types_1 = require('../types');\nconst lazy = require('./lazy');\nconst bs58check = require('bs58check');\nconst OPS = bscript.OPS;\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// input: [redeemScriptSig ...] {redeemScript}\n// witness: <?>\n// output: OP_HASH160 {hash160(redeemScript)} OP_EQUAL\nfunction p2sh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  (0, types_1.typeforce)(\n    {\n      network: types_1.typeforce.maybe(types_1.typeforce.Object),\n      address: types_1.typeforce.maybe(types_1.typeforce.String),\n      hash: types_1.typeforce.maybe(types_1.typeforce.BufferN(20)),\n      output: types_1.typeforce.maybe(types_1.typeforce.BufferN(23)),\n      redeem: types_1.typeforce.maybe({\n        network: types_1.typeforce.maybe(types_1.typeforce.Object),\n        output: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n        input: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n        witness: types_1.typeforce.maybe(\n          types_1.typeforce.arrayOf(types_1.typeforce.Buffer),\n        ),\n      }),\n      input: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n      witness: types_1.typeforce.maybe(\n        types_1.typeforce.arrayOf(types_1.typeforce.Buffer),\n      ),\n    },\n    a,\n  );\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || networks_1.bitcoin;\n  }\n  const o = { network };\n  const _address = lazy.value(() => {\n    const payload = bs58check.decode(a.address);\n    const version = payload.readUInt8(0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const _redeem = lazy.value(() => {\n    const chunks = _chunks();\n    const lastChunk = chunks[chunks.length - 1];\n    return {\n      network,\n      output: lastChunk === OPS.OP_FALSE ? Buffer.from([]) : lastChunk,\n      input: bscript.compile(chunks.slice(0, -1)),\n      witness: a.witness || [],\n    };\n  });\n  // output dependents\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = Buffer.allocUnsafe(21);\n    payload.writeUInt8(o.network.scriptHash, 0);\n    o.hash.copy(payload, 1);\n    return bs58check.encode(payload);\n  });\n  lazy.prop(o, 'hash', () => {\n    // in order of least effort\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().hash;\n    if (o.redeem && o.redeem.output) return bcrypto.hash160(o.redeem.output);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_HASH160, o.hash, OPS.OP_EQUAL]);\n  });\n  // input dependents\n  lazy.prop(o, 'redeem', () => {\n    if (!a.input) return;\n    return _redeem();\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.redeem || !a.redeem.input || !a.redeem.output) return;\n    return bscript.compile(\n      [].concat(bscript.decompile(a.redeem.input), a.redeem.output),\n    );\n  });\n  lazy.prop(o, 'witness', () => {\n    if (o.redeem && o.redeem.witness) return o.redeem.witness;\n    if (o.input) return [];\n  });\n  lazy.prop(o, 'name', () => {\n    const nameParts = ['p2sh'];\n    if (o.redeem !== undefined && o.redeem.name !== undefined)\n      nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().version !== network.scriptHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 23 ||\n        a.output[0] !== OPS.OP_HASH160 ||\n        a.output[1] !== 0x14 ||\n        a.output[22] !== OPS.OP_EQUAL\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2, 22);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    // inlined to prevent 'no-inner-declarations' failing\n    const checkRedeem = redeem => {\n      // is the redeem output empty/invalid?\n      if (redeem.output) {\n        const decompile = bscript.decompile(redeem.output);\n        if (!decompile || decompile.length < 1)\n          throw new TypeError('Redeem.output too short');\n        // match hash against other sources\n        const hash2 = bcrypto.hash160(redeem.output);\n        if (hash.length > 0 && !hash.equals(hash2))\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (redeem.input) {\n        const hasInput = redeem.input.length > 0;\n        const hasWitness = redeem.witness && redeem.witness.length > 0;\n        if (!hasInput && !hasWitness) throw new TypeError('Empty input');\n        if (hasInput && hasWitness)\n          throw new TypeError('Input and witness provided');\n        if (hasInput) {\n          const richunks = bscript.decompile(redeem.input);\n          if (!bscript.isPushOnly(richunks))\n            throw new TypeError('Non push-only scriptSig');\n        }\n      }\n    };\n    if (a.input) {\n      const chunks = _chunks();\n      if (!chunks || chunks.length < 1) throw new TypeError('Input too short');\n      if (!Buffer.isBuffer(_redeem().output))\n        throw new TypeError('Input is invalid');\n      checkRedeem(_redeem());\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      if (a.input) {\n        const redeem = _redeem();\n        if (a.redeem.output && !a.redeem.output.equals(redeem.output))\n          throw new TypeError('Redeem.output mismatch');\n        if (a.redeem.input && !a.redeem.input.equals(redeem.input))\n          throw new TypeError('Redeem.input mismatch');\n      }\n      checkRedeem(a.redeem);\n    }\n    if (a.witness) {\n      if (\n        a.redeem &&\n        a.redeem.witness &&\n        !stacksEqual(a.redeem.witness, a.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2sh = p2sh;\n\n};"],
"names":["shadow$provide","global","require","module","exports","stacksEqual","a","b","length","every","x","i","equals","Buffer","Object","defineProperty","value","p2sh","bcrypto","networks_1","bscript","types_1","lazy","bs58check","OPS","opts","address","hash","output","redeem","input","TypeError","assign","validate","typeforce","network","maybe","String","BufferN","witness","arrayOf","bitcoin","o","_address","payload","decode","version","readUInt8","slice","_chunks","decompile","_redeem","chunks","lastChunk","OP_FALSE","from","compile","prop","allocUnsafe","writeUInt8","scriptHash","copy","encode","hash160","OP_HASH160","OP_EQUAL","concat","nameParts","undefined","name","push","join","hash2","checkRedeem","hasInput","hasWitness","richunks","isPushOnly","isBuffer"]
}
